<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./css/styles.css">
        <title>Movie Watchlist</title>
        <script>
            // onlick func not throwing error if put in a .js file
            function toggleWatchlist(id) {
                let local = localStorage.getItem("watchlist").split(",")
                const isOnLocal = local.find(code => code === id)
                
                if(!isOnLocal) {
                    local.push(id)
                    localStorage.setItem("watchlist", local.join())
                    document.getElementById(id).disabled = true
                    document.getElementById(id).textContent = "Added to wishlist"
                    setTimeout(() => {
                        document.getElementById(id).disabled = false
                        document.getElementById(id).textContent = "‚ûñ Remove"
                    }, 1200)
                } else {
                    const indexToRemove = local.findIndex(mov => mov === id)
                    const removedMov = local.splice(indexToRemove, 1)
                    localStorage.setItem("watchlist", local.join())
                    document.getElementById(id).textContent = "‚ûï Watchlist"
                }
            }
        </script>
    </head>
    <body>
        <header>
            <div class="container">
                <nav class="page-title">
                    <h1>Find your film</h1>
                    <a href="./watchlist.html">My Watchlist</a>
                </nav>
                <div class="search-bar">
                    <p>üîç</p>
                    <input id="search-field" type="text" placeholder="Search for a movie">
                    <button id="search-btn">Search</button>
                </div>
            </div>
        </header>
        <main>
            <div class="container initial-data" id="movie-container">
                <img id="initial-image" src="./images/no-data-initial.png" alt="no initial data">
                <p class="add-some-movies">
                    <a href="./watchlist.html">üé• Or go to your watchlist</a>
                </p>
            </div>
        </main>
        <footer>
            <p class="footer">Made with ü§ç by <a href="https://github.com/nzabajp" target="_blank">/nzabajp</a></p>
        </footer>
        <script src="./js/index.js" type="module"></script>
    </body>
</html>